# ğŸ“¦ NPM å‘å¸ƒé…ç½®æ€»ç»“

æœ¬æ–‡æ¡£æ€»ç»“äº†ä¸ºå°†é¡¹ç›®å‘å¸ƒåˆ° npm æ‰€åšçš„æ‰€æœ‰é…ç½®å’Œæ”¹åŠ¨ã€‚

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. æ ¸å¿ƒæ–‡ä»¶

#### `package.json` - æ›´æ–°
- âœ… åŒ…åæ”¹ä¸º `git-server`
- âœ… æ·»åŠ è¯¦ç»†çš„ description
- âœ… æ·»åŠ  keywordsï¼ˆä¾¿äºæœç´¢ï¼‰
- âœ… æ·»åŠ  repositoryã€bugsã€homepage é“¾æ¥
- âœ… æ·»åŠ  bin å­—æ®µï¼ˆCLI æ”¯æŒï¼‰
- âœ… æ·»åŠ  files å­—æ®µï¼ˆæ§åˆ¶å‘å¸ƒå†…å®¹ï¼‰
- âœ… æ·»åŠ  engines å­—æ®µï¼ˆNode.js ç‰ˆæœ¬è¦æ±‚ï¼‰
- âœ… æ·»åŠ å‘å¸ƒç›¸å…³è„šæœ¬

#### `index.js` - æ–°å»º
- âœ… ä¸»å…¥å£æ–‡ä»¶
- âœ… æä¾› GitServer ç±»
- âœ… æä¾›ä¾¿æ·å¯åŠ¨å‡½æ•°
- âœ… æ”¯æŒç¼–ç¨‹å¼ä½¿ç”¨

#### `bin/cli.js` - æ–°å»º
- âœ… CLI å‘½ä»¤è¡Œå·¥å…·
- âœ… æ”¯æŒ `git-server` å‘½ä»¤
- âœ… æ”¯æŒå‚æ•°é…ç½®ï¼ˆ--port, --host, --repoï¼‰
- âœ… æä¾› helpã€versionã€init ç­‰å­å‘½ä»¤

#### `LICENSE` - æ–°å»º
- âœ… MIT è®¸å¯è¯

#### `.npmignore` - æ–°å»º
- âœ… æ’é™¤å¼€å‘æ–‡ä»¶
- âœ… æ’é™¤æ–‡æ¡£ï¼ˆä¿ç•™ README å’Œ CHANGELOGï¼‰
- âœ… æ’é™¤æ•°æ®ç›®å½•
- âœ… æ’é™¤æ„å»ºè„šæœ¬

### 2. è„šæœ¬æ–‡ä»¶

#### `scripts/postinstall.js` - æ–°å»º
- âœ… npm å®‰è£…åè‡ªåŠ¨æ‰§è¡Œ
- âœ… åˆ›å»ºå¿…è¦çš„ç›®å½•
- âœ… åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶
- âœ… æ˜¾ç¤ºä½¿ç”¨æç¤º

#### `scripts/pre-publish-check.js` - æ–°å»º
- âœ… å‘å¸ƒå‰è‡ªåŠ¨æ£€æŸ¥
- âœ… éªŒè¯å¿…è¦æ–‡ä»¶å­˜åœ¨
- âœ… éªŒè¯ package.json é…ç½®
- âœ… é˜²æ­¢å‘å¸ƒé”™è¯¯

#### `scripts/bump-version.js` - æ–°å»º
- âœ… è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·
- âœ… è‡ªåŠ¨æ›´æ–° CHANGELOG
- âœ… æä¾›ä¸‹ä¸€æ­¥æ“ä½œæç¤º

#### `publish-to-npm.bat` - æ–°å»º
- âœ… ä¸€é”®å‘å¸ƒè„šæœ¬ï¼ˆWindowsï¼‰
- âœ… è‡ªåŠ¨è¿è¡Œæ£€æŸ¥
- âœ… æ˜¾ç¤ºå‘å¸ƒæ–‡ä»¶åˆ—è¡¨
- âœ… ç¡®è®¤åå‘å¸ƒ

### 3. æ–‡æ¡£æ–‡ä»¶

#### `NPM-PUBLISH-GUIDE.md` - æ–°å»º
- âœ… è¯¦ç»†çš„å‘å¸ƒæŒ‡å—
- âœ… å‘å¸ƒå‰å‡†å¤‡
- âœ… å‘å¸ƒæ­¥éª¤
- âœ… å¸¸è§é—®é¢˜è§£å†³

#### `PUBLISH-WORKFLOW.md` - æ–°å»º
- âœ… å®Œæ•´çš„å‘å¸ƒæµç¨‹
- âœ… ç‰ˆæœ¬ç®¡ç†è§„èŒƒ
- âœ… å‘å¸ƒæ£€æŸ¥æ¸…å•
- âœ… å¸¸ç”¨å‘½ä»¤å‚è€ƒ

#### `USAGE-EXAMPLES.md` - æ–°å»º
- âœ… å®‰è£…æ–¹å¼è¯´æ˜
- âœ… å‘½ä»¤è¡Œä½¿ç”¨ç¤ºä¾‹
- âœ… ç¼–ç¨‹å¼ä½¿ç”¨ç¤ºä¾‹
- âœ… å®é™…åº”ç”¨åœºæ™¯

#### `QUICK-PUBLISH.md` - æ–°å»º
- âœ… å¿«é€Ÿå‘å¸ƒå‚è€ƒ
- âœ… 3 æ­¥å‘å¸ƒæµç¨‹

#### `README.md` - æ›´æ–°
- âœ… æ·»åŠ  npm å®‰è£…è¯´æ˜
- âœ… æ·»åŠ  npm ä½¿ç”¨ç¤ºä¾‹
- âœ… ä¿æŒåŸæœ‰å†…å®¹å®Œæ•´

## ğŸ“¦ å‘å¸ƒå†…å®¹

å‘å¸ƒåˆ° npm çš„å†…å®¹åŒ…æ‹¬ï¼š

```
git-server/
â”œâ”€â”€ backend/              # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ config/          # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ dist/            # å‰ç«¯æ„å»ºæ–‡ä»¶
â”œâ”€â”€ frontend/            # å‰ç«¯æºç ï¼ˆä¾›å‚è€ƒï¼‰
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.js          # CLI å·¥å…·
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ postinstall.js  # å®‰è£…åè„šæœ¬
â”œâ”€â”€ config.json         # é»˜è®¤é…ç½®
â”œâ”€â”€ index.js            # ä¸»å…¥å£
â”œâ”€â”€ README.md
â”œâ”€â”€ CHANGELOG.md
â””â”€â”€ LICENSE
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

å‘å¸ƒåï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ï¼š

### 1. å…¨å±€å®‰è£…

```bash
npm install -g git-server
git-server
```

### 2. é¡¹ç›®å®‰è£…

```bash
npm install git-server
npx git-server
```

### 3. ç›´æ¥è¿è¡Œ

```bash
npx git-server
```

### 4. ç¼–ç¨‹å¼ä½¿ç”¨

```javascript
const GitServer = require('git-server');

const server = new GitServer({
  port: 3000,
  host: 'localhost',
  repoPath: './repos'
});

await server.start();
```

## ğŸ“ å‘å¸ƒæ­¥éª¤

### å¿«é€Ÿå‘å¸ƒï¼ˆæ¨èï¼‰

```bash
# 1. æ›´æ–° package.json ä¸­çš„ä»“åº“åœ°å€
# 2. è¿è¡Œå‘å¸ƒè„šæœ¬
publish-to-npm.bat
```

### æ‰‹åŠ¨å‘å¸ƒ

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm run version:patch

# 2. ç¼–è¾‘ CHANGELOG.md

# 3. æäº¤ä»£ç 
git add .
git commit -m "chore: bump version"
git push

# 4. ç™»å½• npm
npm login

# 5. å‘å¸ƒ
npm publish --access public
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### å‘å¸ƒå‰å¿…é¡»åšçš„äº‹

1. **æ›´æ–°ä»“åº“åœ°å€**
   
   ç¼–è¾‘ `package.json`ï¼Œå°†ä»¥ä¸‹åœ°å€æ”¹ä¸ºä½ çš„å®é™…ä»“åº“ï¼š
   
   ```json
   {
     "repository": {
       "url": "https://github.com/ä½ çš„ç”¨æˆ·å/git-server.git"
     },
     "bugs": {
       "url": "https://github.com/ä½ çš„ç”¨æˆ·å/git-server/issues"
     },
     "homepage": "https://github.com/ä½ çš„ç”¨æˆ·å/git-server#readme"
   }
   ```

2. **æ£€æŸ¥åŒ…å**
   
   å¦‚æœ `git-server` å·²è¢«å ç”¨ï¼Œéœ€è¦ä¿®æ”¹åŒ…åï¼š
   
   ```json
   {
     "name": "@ä½ çš„ç”¨æˆ·å/git-server"
   }
   ```

3. **ç¡®ä¿å‰ç«¯å·²æ„å»º**
   
   æ£€æŸ¥ `backend/dist` ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚

### ä¸å½±å“ç°æœ‰éƒ¨ç½²

æ‰€æœ‰ npm ç›¸å…³çš„é…ç½®éƒ½æ˜¯**æ–°å¢**çš„ï¼Œä¸ä¼šå½±å“ï¼š

- âœ… ç°æœ‰çš„éƒ¨ç½²æ–¹å¼
- âœ… ç°æœ‰çš„å¯åŠ¨è„šæœ¬
- âœ… ç°æœ‰çš„æ„å»ºæµç¨‹
- âœ… ç°æœ‰çš„é…ç½®æ–‡ä»¶

ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨åŸæ¥çš„æ–¹å¼éƒ¨ç½²å’Œè¿è¡Œé¡¹ç›®ã€‚

## ğŸ¯ ä¼˜åŠ¿

### å¯¹ç”¨æˆ·

- ğŸš€ ä¸€è¡Œå‘½ä»¤å®‰è£…ï¼š`npm install -g git-server`
- ğŸ¨ ç®€å•æ˜“ç”¨ï¼š`git-server` å³å¯å¯åŠ¨
- ğŸ“¦ æ— éœ€å…‹éš†ä»“åº“
- ğŸ”§ æ”¯æŒå…¨å±€å’Œæœ¬åœ°å®‰è£…
- ğŸ’» æ”¯æŒç¼–ç¨‹å¼é›†æˆ

### å¯¹å¼€å‘è€…

- ğŸ“¦ æ ‡å‡†åŒ–çš„å‘å¸ƒæµç¨‹
- ğŸ” è‡ªåŠ¨åŒ–çš„æ£€æŸ¥è„šæœ¬
- ğŸ“ å®Œæ•´çš„æ–‡æ¡£
- ğŸ”„ ç‰ˆæœ¬ç®¡ç†å·¥å…·
- âœ… ä¸å½±å“ç°æœ‰éƒ¨ç½²

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå‘å¸ƒ](./QUICK-PUBLISH.md) - 3 æ­¥å‘å¸ƒåˆ° npm
- [å®Œæ•´æµç¨‹](./PUBLISH-WORKFLOW.md) - è¯¦ç»†çš„å‘å¸ƒæµç¨‹
- [å‘å¸ƒæŒ‡å—](./NPM-PUBLISH-GUIDE.md) - npm å‘å¸ƒè¯´æ˜
- [ä½¿ç”¨ç¤ºä¾‹](./USAGE-EXAMPLES.md) - å„ç§ä½¿ç”¨æ–¹å¼

## âœ… æ£€æŸ¥æ¸…å•

å‘å¸ƒå‰è¯·ç¡®è®¤ï¼š

- [ ] å·²æ›´æ–° package.json ä¸­çš„ä»“åº“åœ°å€
- [ ] å·²æ£€æŸ¥åŒ…åæ˜¯å¦å¯ç”¨
- [ ] å‰ç«¯å·²æ„å»ºï¼ˆbackend/dist å­˜åœ¨ï¼‰
- [ ] å·²è¿è¡Œ `node scripts/pre-publish-check.js`
- [ ] å·²ç™»å½• npm (`npm login`)
- [ ] å·²é˜…è¯»å‘å¸ƒæ–‡æ¡£

## ğŸ‰ å¼€å§‹å‘å¸ƒ

ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹å‘å¸ƒï¼š

```bash
# Windows
publish-to-npm.bat

# æˆ–æ‰‹åŠ¨å‘å¸ƒ
npm login
npm publish --access public
```

å‘å¸ƒæˆåŠŸåï¼Œä½ çš„é¡¹ç›®å°±å¯ä»¥é€šè¿‡ `npm install git-server` å®‰è£…ä½¿ç”¨äº†ï¼
