# ğŸš€ Git ä»“åº“ç®¡ç†ç³»ç»Ÿ

åŸºäº Node.js + Vue3 çš„ç°ä»£åŒ– Git ä»“åº“ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ä»“åº“ç®¡ç†ã€ä»£ç æŸ¥çœ‹å’Œæƒé™æ§åˆ¶åŠŸèƒ½ã€‚

- âœ… åªéœ€ä¿®æ”¹ä¸€ä¸ª `config.json` æ–‡ä»¶
- âœ… è‡ªåŠ¨æ„å»ºå’Œæ‰“åŒ…
- âœ… 3 æ­¥å®Œæˆéƒ¨ç½²

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“¦ ä»“åº“ç®¡ç†
- åˆ›å»ºã€æŸ¥çœ‹ã€åˆ é™¤ Git ä»“åº“
- æ”¯æŒè£¸ä»“åº“å’Œæ™®é€šä»“åº“
- è‡ªå®šä¹‰ä»“åº“å­˜å‚¨è·¯å¾„
- ä»“åº“çŠ¶æ€ç›‘æ§

### ğŸ” æƒé™ç®¡ç†
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆè¶…ç®¡ã€ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ï¼‰
- ä»“åº“è®¿é—®æƒé™ï¼ˆç™½åå•ï¼‰
- ä»£ç æŸ¥çœ‹æƒé™ï¼ˆç»†ç²’åº¦æ§åˆ¶ï¼‰
- ç”¨æˆ·ç®¡ç†å’Œæƒé™åˆ†é…

### ğŸ“ ä»£ç æŸ¥çœ‹
- **æ–‡ä»¶æµè§ˆ**ï¼šæ ‘å½¢æ–‡ä»¶æµè§ˆå™¨ï¼Œæ”¯æŒæ‡’åŠ è½½
- **ä»£ç é«˜äº®**ï¼šæ”¯æŒ 20+ ç§ç¼–ç¨‹è¯­è¨€
- **å›¾ç‰‡é¢„è§ˆ**ï¼šæ”¯æŒ 6 ç§å›¾ç‰‡æ ¼å¼
- **æäº¤å†å²**ï¼šå¯è§†åŒ–åˆ†æ”¯å›¾ï¼Œå®Œæ•´æäº¤ä¿¡æ¯
- **åˆ†æ”¯åˆ‡æ¢**ï¼šæŸ¥çœ‹ä¸åŒåˆ†æ”¯çš„ä»£ç 
- **æ–‡ä»¶æœç´¢**ï¼šå¿«é€Ÿå®šä½æ–‡ä»¶
- **ä¸€é”®æ“ä½œ**ï¼šå¤åˆ¶ä»£ç ã€ä¸‹è½½æ–‡ä»¶

### ğŸŒ Git HTTP æœåŠ¡
- æ”¯æŒ `git clone`ã€`git push`ã€`git pull`
- HTTP Basic Authentication
- æ“ä½œæ—¥å¿—è®°å½•
- è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Node.js v16+
- npm
- Git

### 2. å®‰è£…ä¾èµ–

```bash
# åç«¯
cd backend
npm install

# å‰ç«¯
cd frontend
npm install
```

### 3. å¯åŠ¨æœåŠ¡

#### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨åç«¯ï¼ˆç«¯å£ 3000ï¼‰
cd backend
npm start

# å¯åŠ¨å‰ç«¯ï¼ˆç«¯å£ 5173ï¼‰
cd frontend
npm run dev
```

æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š
```bash
# Windows
start-backend.bat
start-frontend.bat
```

#### ç”Ÿäº§ç¯å¢ƒ

```bash
# 1. æ„å»ºå‰ç«¯
cd frontend
npm run build

# 2. å¯åŠ¨åç«¯ï¼ˆä¼šè‡ªåŠ¨æ‰˜ç®¡å‰ç«¯ï¼‰
cd backend
npm start
```

### 4. è®¿é—®ç³»ç»Ÿ

- **å¼€å‘ç¯å¢ƒ**ï¼šhttp://localhost:5173
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šhttp://localhost:3000
- **é»˜è®¤è´¦å·**ï¼šadmin / 123456

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åˆ›å»ºä»“åº“

1. ç™»å½•ç³»ç»Ÿ
2. ç‚¹å‡»"ä»“åº“ç®¡ç†" â†’ "åˆ›å»ºä»“åº“"
3. å¡«å†™ä»“åº“åç§°å’Œæè¿°
4. ç‚¹å‡»"åˆ›å»º"

### æ¨é€ä»£ç 

#### é¦–æ¬¡æ¨é€

```bash
# 1. åˆå§‹åŒ–æœ¬åœ°ä»“åº“
cd your-project
git init

# 2. æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin http://localhost:3000/git/your-repo

# 3. æ·»åŠ æ–‡ä»¶å¹¶æäº¤
git add .
git commit -m "Initial commit"

# 4. æ¨é€ï¼ˆä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼‰
git push -u origin main
```

#### å…‹éš†ä»“åº“

```bash
git clone http://localhost:3000/git/your-repo
```

**è®¤è¯è¯´æ˜**ï¼š
- å…‹éš†å’Œæ‹‰å–ï¼šä¸éœ€è¦è®¤è¯
- æ¨é€ï¼šéœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 

### æŸ¥çœ‹ä»£ç 

1. è¿›å…¥ä»“åº“è¯¦æƒ…é¡µ
2. ç‚¹å‡»"æ–‡ä»¶"é€‰é¡¹å¡
3. æµè§ˆæ–‡ä»¶æ ‘ï¼Œç‚¹å‡»æ–‡ä»¶æŸ¥çœ‹å†…å®¹
4. ç‚¹å‡»"æäº¤å†å²"é€‰é¡¹å¡æŸ¥çœ‹æäº¤è®°å½•

### ç®¡ç†æƒé™

1. è¿›å…¥"æƒé™ç®¡ç†"é¡µé¢
2. é€‰æ‹©ä»“åº“
3. è®¾ç½®è®¿é—®æƒé™å’Œä»£ç æŸ¥çœ‹æƒé™
4. ä¿å­˜è®¾ç½®

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [éƒ¨ç½²æ­¥éª¤](./DEPLOY-STEPS.md) | å®Œæ•´çš„éƒ¨ç½²æ­¥éª¤è¯´æ˜ |
| [æ¶æ„è¯´æ˜](./ARCHITECTURE.md) | ç³»ç»Ÿæ¶æ„å’ŒæŠ€æœ¯æ ˆ |
| [éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md) | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² |

## ğŸ”§ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶

ç¼–è¾‘æ ¹ç›®å½•çš„ `config.json`ï¼š

```json
{
  "server": {
    "host": "localhost",
    "port": 3000,
    "timeout": 300000,
    "maxUploadSize": "1024mb"
  },
  "frontend": {
    "host": "localhost",
    "port": 5173
  },
  "git": {
    "defaultRepoPath": "./repos"
  },
  "deployment": {
    "mode": "development"
  }
}
```

### ç¯å¢ƒå˜é‡

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```env
SERVER_HOST=0.0.0.0
PORT=3000
DEFAULT_REPO_PATH=./repos
MAX_UPLOAD_SIZE=1024mb
NODE_ENV=production
```

## ğŸ¨ åŠŸèƒ½ç‰¹æ€§è¯¦è§£

### æ–‡ä»¶æµè§ˆ

- âœ… æ ‘å½¢ç»“æ„ï¼Œæ‡’åŠ è½½
- âœ… æ–‡ä»¶åæœç´¢
- âœ… ä»£ç è¯­æ³•é«˜äº®ï¼ˆJavaScript, Python, Java, Go, Rust ç­‰ï¼‰
- âœ… å›¾ç‰‡é¢„è§ˆï¼ˆJPG, PNG, GIF, SVG, WebPï¼‰
- âœ… å¤§æ–‡ä»¶æ™ºèƒ½å¤„ç†ï¼ˆ>5MBï¼‰
- âœ… äºŒè¿›åˆ¶æ–‡ä»¶æç¤º
- âœ… ä¸€é”®å¤åˆ¶ä»£ç 
- âœ… ä¸€é”®ä¸‹è½½æ–‡ä»¶
- âœ… åˆ†æ”¯åˆ‡æ¢

### æäº¤å†å²

- âœ… å¯è§†åŒ–åˆ†æ”¯å›¾
- âœ… æäº¤å“ˆå¸Œå€¼
- âœ… æäº¤æ¶ˆæ¯
- âœ… ä½œè€…å’Œæ—¶é—´
- âœ… åˆ†æ”¯/æ ‡ç­¾æ ‡è®°
- âœ… åˆ†é¡µåŠ è½½ï¼ˆ20æ¡/é¡µï¼‰
- âœ… åˆ†æ”¯åˆ‡æ¢

### æƒé™æ§åˆ¶

#### ä»“åº“è®¿é—®æƒé™
- å…¬å¼€ï¼šæ‰€æœ‰äººå¯è®¿é—®
- ç§æœ‰ï¼šä»…ç™½åå•ç”¨æˆ·å¯è®¿é—®

#### ä»£ç æŸ¥çœ‹æƒé™
- é»˜è®¤è§„åˆ™ï¼šè¶…ç®¡å’Œç®¡ç†å‘˜æœ‰æƒé™
- ç»§æ‰¿è®¿é—®æƒé™ï¼šæ‰€æœ‰èƒ½è®¿é—®ä»“åº“çš„ç”¨æˆ·éƒ½èƒ½æŸ¥çœ‹ä»£ç 
- è‡ªå®šä¹‰ï¼šç²¾ç¡®æŒ‡å®šç”¨æˆ·

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**ï¼šNode.js + Express
- **Git æ“ä½œ**ï¼šchild_processï¼ˆåŸç”Ÿ Git å‘½ä»¤ï¼‰
- **è®¤è¯**ï¼šJWT + HTTP Basic Auth
- **æ–‡ä»¶æ“ä½œ**ï¼šfs-extra

### å‰ç«¯
- **æ¡†æ¶**ï¼šVue 3 (Composition API)
- **UI ç»„ä»¶**ï¼šElement Plus
- **ä»£ç é«˜äº®**ï¼šhighlight.js
- **HTTP å®¢æˆ·ç«¯**ï¼šaxios
- **æ„å»ºå·¥å…·**ï¼šVite

## ğŸ“ é¡¹ç›®ç»“æ„

```
my-git-server/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app.js                 # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ repo-config.json  # ä»“åº“é…ç½®
â”‚   â”‚   â””â”€â”€ users.json        # ç”¨æˆ·é…ç½®
â”‚   â”œâ”€â”€ routes/                # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ repo-routes.js    # ä»“åº“ç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ git-http.js       # Git HTTP æœåŠ¡
â”‚   â”‚   â””â”€â”€ repo-management-routes.js  # æƒé™ç®¡ç† API
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ git-utils.js      # Git æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ auth-utils.js     # è®¤è¯å·¥å…·
â”‚   â”‚   â””â”€â”€ repo-permission.js # æƒé™ç®¡ç†
â”‚   â””â”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RepoDetail.vue      # ä»“åº“è¯¦æƒ…ï¼ˆå«æ–‡ä»¶æµè§ˆå’Œæäº¤å†å²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionManagement.vue  # æƒé™ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ UserManagement.vue  # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api/              # API æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ repo.js       # ä»“åº“ API
â”‚   â”‚   â”‚   â””â”€â”€ repoManagement.js  # æƒé™ç®¡ç† API
â”‚   â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ repos/                      # Git ä»“åº“å­˜å‚¨ç›®å½•
â”œâ”€â”€ config.json                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ GIT-USAGE-GUIDE.md         # Git ä½¿ç”¨æ•™ç¨‹
â””â”€â”€ README.md                  # æœ¬æ–‡ä»¶
```

## ğŸ” API æ¥å£

### ä»“åº“ç®¡ç†
- `GET /api/repo/list` - è·å–ä»“åº“åˆ—è¡¨
- `POST /api/repo/create` - åˆ›å»ºä»“åº“
- `DELETE /api/repo/delete/:name` - åˆ é™¤ä»“åº“
- `GET /api/repo/status` - æ£€æŸ¥ä»“åº“çŠ¶æ€

### æ–‡ä»¶æµè§ˆ
- `GET /api/repo/file-tree` - è·å–æ–‡ä»¶æ ‘
- `GET /api/repo/file-content-with-permission` - è·å–æ–‡ä»¶å†…å®¹
- `GET /api/repo/branches` - è·å–åˆ†æ”¯åˆ—è¡¨
- `GET /api/repo/commits` - è·å–æäº¤å†å²

### æƒé™ç®¡ç†
- `GET /api/repos/:name/whitelist` - è·å–è®¿é—®æƒé™
- `PUT /api/repos/:name/whitelist` - è®¾ç½®è®¿é—®æƒé™
- `GET /api/repos/:name/code-view-permission` - è·å–ä»£ç æŸ¥çœ‹æƒé™
- `PUT /api/repos/:name/code-view-permission` - è®¾ç½®ä»£ç æŸ¥çœ‹æƒé™

### Git HTTP
- `GET /git/:repo/info/refs` - Git Smart HTTP
- `POST /git/:repo/git-upload-pack` - Clone/Fetch
- `POST /git/:repo/git-receive-pack` - Push

## ğŸ“¦ æ„å»ºå‘å¸ƒåŒ…

### ä½¿ç”¨æ„å»ºè„šæœ¬

```bash
# æ„å»ºå¹²å‡€çš„å‘å¸ƒåŒ…
build-release.bat
```

æ„å»ºè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ„å»ºå¹¶æ··æ·†å‰ç«¯ä»£ç 
- âœ… æ··æ·†åç«¯ä»£ç 
- âœ… åˆ›å»ºå¹²å‡€çš„é…ç½®æ–‡ä»¶ï¼ˆåªä¿ç•™ admin è´¦å·ï¼‰
- âœ… åˆ›å»ºç©ºçš„ repos å’Œ logs ç›®å½•
- âœ… ç”Ÿæˆ release ç›®å½•

**æ³¨æ„**ï¼šæ„å»ºçš„å‘å¸ƒåŒ…æ˜¯å®Œå…¨å¹²å‡€çš„ï¼Œé€‚åˆåˆ†å‘ç»™å…¶ä»–äººä½¿ç”¨ã€‚

### å‘å¸ƒåŒ…ç»“æ„

```
release/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.js (æ··æ·†å)
â”‚   â”œâ”€â”€ routes/ (æ··æ·†å)
â”‚   â”œâ”€â”€ utils/ (æ··æ·†å)
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ users.json (åªåŒ…å« admin/123456)
â”‚   â”‚   â””â”€â”€ repo-config.json (ç©ºé…ç½®)
â”‚   â”œâ”€â”€ repos/ (ç©ºç›®å½•)
â”‚   â”œâ”€â”€ logs/ (ç©ºç›®å½•)
â”‚   â”œâ”€â”€ dist/ (å‰ç«¯é™æ€æ–‡ä»¶)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ config.json (æœåŠ¡å™¨é…ç½®)
â”œâ”€â”€ README.md (éƒ¨ç½²è¯´æ˜)
â””â”€â”€ start.bat (å¯åŠ¨è„šæœ¬)
```

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | å¼€æºç‰ˆ | ä¼ä¸šç‰ˆ |
|------|--------|--------|
| ä»“åº“ç®¡ç† | âœ… | âœ… |
| Git HTTP æœåŠ¡ | âœ… | âœ… |
| ä»£ç æŸ¥çœ‹ | âœ… | âœ… |
| æƒé™ç®¡ç† | âœ… | âœ… |
| ç”¨æˆ·ç®¡ç† | âœ… | âœ… |
| æ“ä½œæ—¥å¿— | âœ… | âœ… |
| ä»£ç å®¡æŸ¥ | âŒ | âœ… |
| CI/CD é›†æˆ | âŒ | âœ… |
| é«˜çº§ç»Ÿè®¡ | âŒ | âœ… |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ‰ æ›´æ–°æ—¥å¿—

### v2.0.0 (2026-01-15)
- âœ¨ æ–°å¢æ–‡ä»¶æµè§ˆåŠŸèƒ½
- âœ¨ æ–°å¢æäº¤å†å²æŸ¥çœ‹
- âœ¨ æ–°å¢ä»£ç æŸ¥çœ‹æƒé™ç®¡ç†
- ğŸ¨ ä¼˜åŒ–ç”¨æˆ·ç•Œé¢
- ğŸ› ä¿®å¤æ–‡ä»¶æ ‘åŠ è½½é—®é¢˜

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€ä»“åº“ç®¡ç†
- âœ¨ Git HTTP æœåŠ¡
- âœ¨ ç”¨æˆ·è®¤è¯

---

**å¼€å‘è€…**ï¼štinyflake
**æœ€åæ›´æ–°**ï¼š2026-01-15  
**ç‰ˆæœ¬**ï¼š2.0.0

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
